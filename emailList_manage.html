<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>控制台</title>
		<link rel="stylesheet" type="text/css" href="Css/identify.css" />
		<link rel="stylesheet" type="text/css" href="Css/layout.css" />
		<link rel="stylesheet" type="text/css" href="Css/account.css" />
		<link rel="stylesheet" type="text/css" href="Css/style.css" />
		<link rel="stylesheet" type="text/css" href="Css/control_index.css" />
		<script type="text/javascript" src="Js/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="Js/layer/layer.js"></script>
		<script type="text/javascript" src="Js/haidao.offcial.general.js"></script>
		<script type="text/javascript" src="Js/select.js"></script>
		<script type="text/javascript" src="Js/haidao.validate.js"></script>
	</head>
	<body>
		<div id="view-topbar"></div>
		<script>
			$('#view-topbar').load('module/view-topbar.html')
		</script>
		<div class="view-body">
			<div id="view-sidebar"></div>
			<script>
				$('#view-sidebar').load('module/view-sidebar.html')
			</script>
			<div class="view-product">
				<div class="info-center">
					<div class=" padding-big-tb manage-head">
						<h6 class="padding-left manage-head-con">邮箱管理</h6>
					</div>
					<div class="info-center-con">
						<div class=" info-center-title h5 margin-big-top clearfix">
							<span class="fl padding-large-right"><a href="#" id="link1">账号管理</a></span>
							<span class="fl padding-large-right"><a href="#" id="link2">添加账号</a></span>
						</div>
					</div>
					<div class="offcial-table table-margin clearfix" id="manage">
						<div class="tr-th clearfix">
							<div class="th w30 text-center">
								账号
							</div>
							<div class="th w20 text-center">
								类型
							</div>
							<div class="th w20 text-center">
								昵称
							</div>
                            <div class="th w30 text-center">
								操作
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱1@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
                            <div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱2@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
                            <div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱3@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
							<div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱4@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
                            <div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱5@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
                            <div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<div class="tr clearfix border-bottom-none" id="1">
							<div class="td w30 text-center" id="n">
								邮箱6@example.com
							</div>
							<div class="td w20 text-center" id="t">
								example邮箱
							</div>
							<div class="td w20 text-center" id="k">
								٩
							</div>
                            <div class="td w10 text-center">
								<a onclick="alter('1')">修改</a>
							</div>
							<div class="td w10 text-center">
								<a class="switch-link">切换</a>
							</div>
                            <div class="td w10 text-center">
								<a onclick="hide('1')">删除</a>
							</div>
						</div>
						<dialog id="dialog1">
							<h2>修改账号信息</h2>
							<form>
								<p>序号:<input type="text" id="number">
								<p>账号:<input type="text" id="name"></p>
								<p>类型:<input type="text" id="type"></p>
								<p>昵称:<input type="text" id="nickname"></p>
								<div class="button-container">  
									<input type="button" id="button1" value="完成" onclick="finish('dialog1')">  
									<input type="button" id="button2" value="取消" onclick="cancel('dialog1')">  
								</div>  
							</form>
						</dialog>					
					</div>
					<div class="offcial-table table-margin clearfix" id="add">
						<div style="border-bottom: rgb(179, 177, 177) 0.5px solid;position: relative;">
							<p style="font-weight: bold;font-size: larger;margin:20px;margin-bottom: 5px;">我的邮箱</p>
							<p style="margin: 20px;margin-top: 5px;">添加邮箱账号，即可收取和管理该邮箱的邮件。</p>
							<button id="button3" onclick="show()">添加邮箱账号</button>
						</div>
						
						<div class="offcial-table table-margin clearfix" id="">
							<div class="tr-th clearfix">
								<div class="th w30 text-center">
									账号
								</div>
								<div class="th w20 text-center">
									类型
								</div>
								<div class="th w20 text-center">
									昵称
								</div>
								<div class="th w30 text-center">
									添加时间
								</div>
							</div>
							<div class="tr clearfix border-bottom-none" id="11">
								<div class="td w30 text-center" id="n1">
									邮箱1@example.com
								</div>
								<div class="td w20 text-center" id="t1">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k1">
									٩
								</div>	
								<div class="td w30 text-center">
									无
								</div>							
							</div>
							<div class="tr clearfix border-bottom-none" id="1">
								<div class="td w30 text-center" id="n">
									邮箱2@example.com
								</div>
								<div class="td w20 text-center" id="t">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k">
									٩
								</div>
								<div class="td w30 text-center">
									无
								</div>	
							</div>
							<div class="tr clearfix border-bottom-none" id="1">
								<div class="td w30 text-center" id="n">
									邮箱3@example.com
								</div>
								<div class="td w20 text-center" id="t">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k">
									٩
								</div>
								<div class="td w30 text-center">
									无
								</div>	
							</div>
							<div class="tr clearfix border-bottom-none" id="1">
								<div class="td w30 text-center" id="n">
									邮箱4@example.com
								</div>
								<div class="td w20 text-center" id="t">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k">
									٩
								</div>
								<div class="td w30 text-center">
									无
								</div>	
							</div>
							<div class="tr clearfix border-bottom-none" id="1">
								<div class="td w30 text-center" id="n">
									邮箱5@example.com
								</div>
								<div class="td w20 text-center" id="t">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k">
									٩
								</div>
								<div class="td w30 text-center">
									无
								</div>	
							</div>
							<div class="tr clearfix border-bottom-none" id="1">
								<div class="td w30 text-center" id="n">
									邮箱6@example.com
								</div>
								<div class="td w20 text-center" id="t">
									example邮箱
								</div>
								<div class="td w20 text-center" id="k">
									٩
								</div>
								<div class="td w30 text-center">
									无
								</div>	
							</div>
						<dialog id="dialog2">
							<h2>添加邮箱账号</h2>
								<p>账号:</p>
								<input type="text" id="username" placeholder="请输入邮箱账号" style="height: 20px; width:600px;font-size: smaller;color:rgb(176, 176, 176);border: 0.5px rgb(176, 176, 176) solid;border-radius: 4px;">
								<div class="button-container">  
									<input type="button" id="button1" value="确认" onclick="add()">  
									<input type="button" id="button2" value="取消" onclick="cancel('dialog2')">  
								</div>  
						</dialog>
					</div>
				</div>
			</div>
		</div>

		<script> 
			function getBeijingTime() {  
				const now = new Date();   
				return now;  
			}  
            var accountLink = document.getElementById("link1");   
            var addAccountLink = document.getElementById("link2");   
            var manageDiv = document.getElementById("manage");    
            var addDiv = document.getElementById("add");  
  
            accountLink.addEventListener("click", function(e) {  
                e.preventDefault(); 
                addDiv.style.display='none';  
                manageDiv.style.display='block';
            });  
  
            addAccountLink.addEventListener("click", function(e) {  
                e.preventDefault();  
                manageDiv.style.display='none';
                addDiv.style.display='block'; 
            }); 
			function add(){
				var dialog = document.getElementById('dialog2');
				dialog.style.display='none';
				var existingDiv = document.getElementById('1'); 
				
				var username = document.getElementById("username").value;
				var type = username.match(/@(\w+)\./)[1];  
				var newDiv = document.createElement('div');  
				newDiv.className = 'tr clearfix border-bottom-none';  
				newDiv.id = (parseInt(manageDiv.children.length)-1).toString();  
				
				var emailDiv = document.createElement('div');  
				emailDiv.className = 'td w30 text-center';  
				emailDiv.id = 'n';  
				emailDiv.textContent = username;  
				newDiv.appendChild(emailDiv);  

				var emailTypeDiv = document.createElement('div');  
				emailTypeDiv.className = 'td w20 text-center';  
				emailTypeDiv.id = 't';  
				emailTypeDiv.textContent = type+'邮箱';  
				newDiv.appendChild(emailTypeDiv);  

				var numberDiv = document.createElement('div');  
				numberDiv.className = 'td w20 text-center';  
				numberDiv.id = 'k';  
				numberDiv.textContent = '٩';  
				newDiv.appendChild(numberDiv);  

				var modifyLink = document.createElement('a');  
				modifyLink.textContent = '修改';  
				modifyLink.onclick = function() { 
					alter('2'); 
				};
				modifyLink.className = 'td w15 text-center';  
				modifyLink.id = '';  
				newDiv.appendChild(modifyLink);  
		
				var deleteLink = document.createElement('a');  
				deleteLink.textContent = '删除';  
				deleteLink.onclick = function() { 
					hide('2'); 
				}; 
				deleteLink.className = 'td w15 text-center';  
				deleteLink.id = '';  
				newDiv.appendChild(deleteLink);  
				console.log(newDiv);
				
				existingDiv.parentNode.insertBefore(newDiv, existingDiv.nextSibling);

				var existingDiv2 = document.getElementById('11');
				var newDiv2 = document.createElement('div');  
				newDiv2.className = 'tr clearfix border-bottom-none'; 
				newDiv2.id = '12';
				var emailDiv2 = document.createElement('div');  
				emailDiv2.className = 'td w30 text-center';  
				emailDiv2.id = 'n1';  
				emailDiv2.textContent = username;  
				newDiv2.appendChild(emailDiv2); 
				var emailTypeDiv2 = document.createElement('div');  
				emailTypeDiv2.className = 'td w20 text-center';  
				emailTypeDiv2.id = 't1';  
				emailTypeDiv2.textContent = type+'邮箱';  
				newDiv2.appendChild(emailTypeDiv2);
				var numberDiv2 = document.createElement('div');  
				numberDiv2.className = 'td w20 text-center';  
				numberDiv2.id = 'k1';  
				numberDiv2.textContent = '٩';  
				newDiv2.appendChild(numberDiv2);
				const beijingTime = getBeijingTime().toLocaleString(); 
				var caozuo = document.createElement('div')
				caozuo.className = 'td w30 text-center';
				caozuo.textContent = beijingTime;
				newDiv2.appendChild(caozuo);
				existingDiv2.parentNode.insertBefore(newDiv2, existingDiv2.nextSibling);
			}
			function show(){
				var dialog = document.getElementById('dialog2');
				dialog.style.display='block';
			}   
			function alter(divId){
				var dialog = document.getElementById('dialog1');
				dialog.style.display='block';

				var div = document.getElementById(divId); 
				var Elements = div.querySelectorAll('div'); 
				var name =Elements[0].innerText;
				var type = Elements[1].innerText;  
				var nickname = Elements[2].innerText;  
				console.log(divId);
				document.getElementById('number').value = divId;
				document.getElementById('name').value = name;  
				document.getElementById('type').value = type;  
				document.getElementById('nickname').value = nickname;  
  
            }
			function cancel(dialogId){
				var dialog = document.getElementById(dialogId);
				dialog.style.display='none';
			}
			function finish(dialogId){
				var dialog = document.getElementById(dialogId);
				dialog.style.display='none';

				var number = document.getElementById('number').value;
				var name = document.getElementById("name").value;
				var type = name.match(/@(\w+)\./)[1];  
				var nickname = document.getElementById("nickname").value;
				var div = document.getElementById(number);

				var element1 = div.querySelector('#n'); 
				element1.textContent = name;
				var element2 = div.querySelector('#t');
				element2.textContent = type+'邮箱';
				var element3 = div.querySelector('#k');
				element3.textContent = nickname;
				if(number=='1'){
					var div2 = document.getElementById('11');
				}
				if(number=='2'){
					var div2 = document.getElementById('12');
				}
				var element4 = div2.querySelector('#n1'); 
				element4.textContent = name;
				var element5 = div2.querySelector('#t1');
				element5.textContent = type+'邮箱';
				var element6 = div2.querySelector('#k1');
				element6.textContent = nickname;
			}
			function hide(divId){
				if (divId=='1'){
				var div = document.getElementById('11');
				div.style.display='none';
				}if (divId=='2'){
				var div = document.getElementById('12');
				div.style.display='none';
				}
				var div = document.getElementById(divId);
				div.style.display='none';
			}
			$(".sidebar-title").live('click', function() {
				if ($(this).parent(".sidebar-nav").hasClass("sidebar-nav-fold")) {
					$(this).next().slideDown(200);
					$(this).parent(".sidebar-nav").removeClass("sidebar-nav-fold");
				} else {
					$(this).next().slideUp(200);
					$(this).parent(".sidebar-nav").addClass("sidebar-nav-fold");
				}
			});


			
		</script>
		<script>
			// 实现切换功能
				var switchLinks = document.getElementsByClassName('switch-link');
	
			// Loop through all switch links and attach a click event listener to each
				for (var i = 0; i < switchLinks.length; i++) {
					switchLinks[i].addEventListener('click', function() {
						// Find the closest parent div with class "tr"
						var parentDiv = this.closest('.tr');
						
						// Get the content of the div with ID "n" inside the parent div
						var content = parentDiv.querySelector('#n').textContent.trim();
	
						// Display the content in an alert (for demonstration)
						alert("切换到邮箱: " + content);
						
						// You can now use the 'content' variable as needed
						// For example, you can pass it to a function or use it in further operations
					});
				}
		</script>
	</body>
</html>
